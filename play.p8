pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
function _init()
 mode = move_around
end

function _update()
 mode()
end

function _draw()
 move_around_draw()
end
-->8
--player
pc =
{
 posx=0,
 posy=0,
 speed=3,
 bearing=0
}
-->8
--util
comp =
{{-.707,-.707},{0,-1},
 {.707,-.707},{1,0},
 {.707,.707},{0,1},
 {-.707,.707},{-1,0}}

function dpad_bearing()
 if btn(â¬…ï¸) then
  if btn(â¬†ï¸) then
   return 0
  elseif btn(â¬‡ï¸) then
   return 6
  else
   return 7
  end
 elseif btn(âž¡ï¸) then
  if btn(â¬†ï¸) then
   return 2
  elseif btn(â¬‡ï¸) then
   return 4
  else
   return 3
  end
 elseif btn(â¬†ï¸) then
  return 1
 elseif btn(â¬‡ï¸) then
  return 5
 end
 return false
end

function move(self, speed, bearing)
 self.posx += speed * comp[bearing+1][1]
 self.posy += speed * comp[bearing+1][2]
end
-->8
--update and draw functions
function move_around()
 local speed = pc.speed
 local _bearing = dpad_bearing()
 if btn(âŽ) then
  speed *= 1.5
 end
 if btnp(ðŸ…¾ï¸) then
  mode = select_action
 end
 if _bearing then
  pc.bearing = _bearing
  move(pc,speed, pc.bearing)
 end
end

function move_around_draw()
 cls()
 map(0,0,-pc.posx,-pc.posy,16,16)
 spr(1,60,60)
end

function select_action()
 if btnp(âŽ) then
  mode = move_around
 end
 if btnp(ðŸ…¾ï¸) then
  sfx(0)
 end
end
-->8
--test code
function test_update()
 bearing = dpad_bearing()
 if bearing then
 	print(comp[bearing+1][1])
 	print(comp[bearing+1][2])
 	print('------------')
 end
end
__gfx__
00000000011111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770001a1111a10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700011e11100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000001111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
7dddddd6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d6666665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d6666665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d6666665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d6666665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d6666665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d6666665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
6555555d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1000000000000000000000000000001000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000200001a0701e0702207026070260700d07009000080002c0002c0002b0002800025000200001e0001a00000000000000000000000000000000000000000000000000000000000000000000000000000000000
